<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üåà Word Journey: Prefix Focus</title>
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@600&family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --pink: #f78fb3;
      --blue: #74b9ff;
      --yellow: #ffeaa7;
      --green: #55efc4;
      --purple: #a29bfe;
      --text-dark: #2d3436;
      --card-bg: #ffffffd9;
    }

    body {
      font-family: 'Sarabun', sans-serif;
      margin: 0;
      background: linear-gradient(145deg, var(--blue), var(--pink), var(--yellow));
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 1rem;
      animation: bgmove 10s infinite alternate;
      background-size: 300% 300%;
    }

    @keyframes bgmove {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    .container {
      background: var(--card-bg);
      border-radius: 25px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 500px;
      padding: 1.2rem;
      animation: pop 0.5s ease;
    }

    @keyframes pop {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    h1 {
      font-family: 'Mali', cursive;
      color: var(--text-dark);
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }

    .category-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.8rem;
    }

    .category-button {
      background-color: var(--purple);
      color: white;
      border: none;
      border-radius: 18px;
      font-size: 1.1rem;
      padding: 1rem;
      box-shadow: 0 4px 0 rgba(0,0,0,0.2);
      transition: all 0.2s ease-in-out;
      font-family: 'Mali', cursive;
    }

    .category-button:hover {
      transform: translateY(-3px);
      background-color: var(--pink);
    }

    #lesson-page { display: none; }

    #vocab-card {
      background: var(--blue);
      border-radius: 20px;
      padding: 1.5rem;
      color: white;
      margin-bottom: 1rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    #english-word {
      font-size: 2.5rem;
      font-weight: 700;
      display: block;
    }

    #thai-word {
      font-size: 1.6rem;
      margin-top: 0.5rem;
    }

    .control-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
    }

    button {
      font-family: 'Mali', cursive;
      border: none;
      border-radius: 30px;
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      color: white;
      cursor: pointer;
      transition: transform 0.1s ease, background-color 0.2s;
      box-shadow: 0 3px 0 rgba(0,0,0,0.2);
    }

    button:active {
      transform: translateY(2px);
      box-shadow: none;
    }

    .nav-btn { background-color: var(--pink); }
    .audio-btn { background-color: var(--green); }
    .play-btn { background-color: var(--blue); }
    .back-btn { background-color: var(--purple); }

    @media (min-width: 600px) {
      .category-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="category-page">
      <h1>üìö Word Journey<br>Prefix Focus</h1>
      <div id="category-grid" class="category-grid"></div>
    </div>

    <div id="lesson-page">
      <h1 id="lesson-title">...</h1>
      <div id="vocab-card">
        <span id="english-word">...</span>
        <span id="thai-word">...</span>
      </div>
      <div class="control-group">
        <button id="prev-btn" class="nav-btn">‚óÄÔ∏è ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
        <button id="next-btn" class="nav-btn">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂Ô∏è</button>
      </div>
      <div class="control-group">
        <button onclick="speakText(currentVocab.thai, 'th-TH')" class="audio-btn">üîä ‡∏ü‡∏±‡∏á (‡πÑ‡∏ó‡∏¢)</button>
        <button onclick="speakText(currentVocab.english, 'en-US')" class="audio-btn">üéß Listen (EN)</button>
      </div>
      <div class="control-group">
        <button id="play-pause-btn" class="play-btn">‚ñ∂Ô∏è Play</button>
        <button id="stop-btn" class="back-btn">‚èπÔ∏è Stop</button>
        <button id="back-to-cat-btn" class="back-btn">üè† ‡∏Å‡∏•‡∏±‡∏ö</button>
      </div>
    </div>
  </div>

  <script>
    const vocabularyData = {
      "IN-": [{thai:"‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",english:"Incomplete"},{thai:"‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô",english:"Invisible"}],
      "EX-": [{thai:"‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å",english:"Export"},{thai:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",english:"Examine"}],
      "PRE-": [{thai:"‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£",english:"Prepare"},{thai:"‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢",english:"Predict"}],
      "DIS-": [{thai:"‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢",english:"Disagree"},{thai:"‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö",english:"Dislike"}],
      "UN-": [{thai:"‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à",english:"Unhappy"},{thai:"‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°",english:"Unfair"}],
      "RE-": [{thai:"‡∏ó‡∏≥‡∏ã‡πâ‡∏≥",english:"Repeat"},{thai:"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",english:"Rewrite"}],
      "CO-": [{thai:"‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠",english:"Cooperate"},{thai:"‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö",english:"Compare"}],
      "SUB-": [{thai:"‡∏£‡∏ñ‡πÑ‡∏ü‡πÉ‡∏ï‡πâ‡∏î‡∏¥‡∏ô",english:"Subway"},{thai:"‡∏™‡πà‡∏á",english:"Submit"}],
      "ANTI-": [{thai:"‡∏¢‡∏≤‡∏õ‡∏è‡∏¥‡∏ä‡∏µ‡∏ß‡∏ô‡∏∞",english:"Antibiotic"},{thai:"‡∏Ñ‡∏≥‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°",english:"Antonym"}],
      "INTER-": [{thai:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®",english:"International"},{thai:"‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï",english:"Internet"}]
    };

    const categoryGrid = document.getElementById("category-grid");
    const categoryPage = document.getElementById("category-page");
    const lessonPage = document.getElementById("lesson-page");
    const lessonTitle = document.getElementById("lesson-title");
    const englishWord = document.getElementById("english-word");
    const thaiWord = document.getElementById("thai-word");
    const playPauseBtn = document.getElementById("play-pause-btn");
    const nextBtn = document.getElementById("next-btn");
    const prevBtn = document.getElementById("prev-btn");
    const backBtn = document.getElementById("back-to-cat-btn");
    const stopBtn = document.getElementById("stop-btn");

    let currentVocab = {};
    let currentList = [];
    let index = 0;
    let isPlaying = false;

    Object.keys(vocabularyData).forEach(cat=>{
      const btn=document.createElement("button");
      btn.className="category-button";
      btn.textContent=cat;
      btn.onclick=()=>startLesson(cat);
      categoryGrid.appendChild(btn);
    });

    function startLesson(cat){
      categoryPage.style.display="none";
      lessonPage.style.display="block";
      lessonTitle.textContent=cat;
      currentList=vocabularyData[cat];
      index=0;
      showWord();
    }

    function showWord(){
      currentVocab=currentList[index];
      englishWord.textContent=currentVocab.english;
      thaiWord.textContent=currentVocab.thai;
    }

    nextBtn.onclick=()=>{ if(index<currentList.length-1){index++;showWord();}};
    prevBtn.onclick=()=>{ if(index>0){index--;showWord();}};
    backBtn.onclick=()=>{lessonPage.style.display="none";categoryPage.style.display="block";stopAuto();};
    playPauseBtn.onclick=toggleAutoPlay;
    stopBtn.onclick=stopAuto;

    function speakText(text,lang,cb=null){
      if('speechSynthesis'in window){
        window.speechSynthesis.cancel();
        const u=new SpeechSynthesisUtterance(text);
        u.lang=lang;
        if(cb)u.onend=cb;
        window.speechSynthesis.speak(u);
      }
    }

    function toggleAutoPlay(){
      if(isPlaying){stopAuto();}
      else{isPlaying=true;playPauseBtn.textContent="‚è∏Ô∏è Pause";autoPlay();}
    }

    function stopAuto(){
      isPlaying=false;
      playPauseBtn.textContent="‚ñ∂Ô∏è Play";
      window.speechSynthesis.cancel();
    }

    function autoPlay(){
      if(!isPlaying)return;
      speakText(currentList[index].english,'en-US',()=>{
        speakText(currentList[index].thai,'th-TH',()=>{
          if(index<currentList.length-1){
            index++;showWord();setTimeout(autoPlay,700);
          }else{stopAuto();}
        });
      });
    }
  </script>
</body>
</html>
